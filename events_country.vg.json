{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "All Time Matches (2015-2020)",
  "width": 600,
  "height": 300,
  "projection": {"type": "equalEarth"},
  "data": {"url": "ne_110m.json",
           "format": {"type": "topojson", 
                      "feature": "ne_110m_admin_0_countries"}},
  "transform": [{"lookup": "properties.NAME",
                 "from": {"data": {"url": "events_country.csv"},
                          "key": "country",
                          "fields": ["total_matches", "total_events", "total_teams", "total_players", "total_matches/event"]}}],
  "mark": {"type": "geoshape"},
  "encoding": {"color": {"field": "total_matches/event",
                         "type": "quantitative",
                         "scale": {"type": "threshold",
                                   "domain": [1, 5, 10],
                                   "range": ["#f2f2f2", "#c6ccdc", "#8f9bba", "#586d98"]}},
               "tooltip": [{"field": "properties.NAME", 
                            "type": "nominal", 
                            "title": "Country"},
                           {"field": "total_matches", 
                            "type": "quantitative",
                            "format": ".2f"},
                            {"field": "total_events", 
                             "type": "quantitative",
                             "format": ".2f"},
                             {"field": "total_teams", 
                              "type": "quantitative",
                              "format": ".2f"},
                              {"field": "total_players", 
                               "type": "quantitative",
                               "format": ".2f"}]}
}